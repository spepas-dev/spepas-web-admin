import{j as e,g as p,a as m,R as k,V as A,k as K,r as f,F as O,C as q,y as z,l as P,n as y,m as g,t as j}from"./index-Bs-wGMdE.js";import{D as B}from"./index-DGNq4se_.js";import{D as w,a as E,b as F,c as D,d as S}from"./dialog-CrFE0KFo.js";import{X as H}from"./x-vPXFMVln.js";import{a as L,C as U}from"./card-grid-BEKwl93l.js";import{u as V,a as G,F as Q,b,c as v,d as C,e as R,f as N}from"./form-B2FrkITU.js";import{u as $}from"./useMutation-0W2eqxtO.js";import{u as X}from"./useQuery-DJbOm2tB.js";import{s as J,o as I,a as W,b as M}from"./index-DahEJCz4.js";import{I as Y}from"./input-CJbjcwmh.js";import{T as Z}from"./trash-2-DtvTXTfP.js";import{P as T}from"./plus-tBYduZPx.js";import{G as _}from"./globe-gPv9VpHH.js";import{f as ee}from"./format-CBpsKyOP.js";import"./table-Cbl8yr_z.js";import"./sliders-horizontal-Bf_yx_bY.js";import"./select-CYPdPblv.js";import"./arrow-left-pxssSCEJ.js";import"./arrow-right-BTsiRPBN.js";import"./card-BbF8MIz4.js";import"./popover-v_vaRe_g.js";const se={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"max-w-[95vw] max-h-[95vh]"},ae=({isOpen:s,onClose:r,title:a,description:t,size:c="md",persistent:l=!1,className:i,children:x})=>{const u=o=>{!o&&!l&&r()};return e.jsx(w,{open:s,onOpenChange:u,children:e.jsxs(E,{className:p(se[c],i),onPointerDownOutside:o=>l&&o.preventDefault(),onEscapeKeyDown:o=>l&&o.preventDefault(),children:[!l&&e.jsxs(m,{variant:"ghost",size:"icon",className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",onClick:r,children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),e.jsxs(F,{children:[a&&e.jsx(D,{children:a}),t&&e.jsx(S,{children:t})]}),e.jsx("div",{className:"mt-4",children:x})]})})},re=({children:s,onSubmit:r,submitText:a="Submit",cancelText:t="Cancel",loading:c=!1,showFooter:l=!0,...i})=>e.jsx(ae,{...i,children:e.jsxs("div",{className:"space-y-4",children:[s,l&&e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[e.jsx(m,{variant:"outline",onClick:i.onClose,disabled:c,children:t}),r&&e.jsx(m,{onClick:r,disabled:c,children:c?"Loading...":a})]})]})}),te=()=>{const s=k("form-modal");return{openForm:a=>{s.open(re,{title:a.title,children:a.children,onSubmit:a.onSubmit,submitText:a.submitText,showFooter:a.showFooter},{size:a.size})},close:s.close,update:s.update}},d={all:["manufactures"],detail:s=>[...d.all,"detail",s],lists:()=>[...d.all,"list"],list:s=>[...d.lists(),s],stats:()=>[...d.all,"stats"]},ne=s=>X({queryKey:d.list({}),queryFn:()=>A.getManufactures(s)}),oe=()=>{const s=K();return $({mutationFn:r=>A.createManufacturer(r),onSuccess:()=>{s.invalidateQueries({queryKey:d.all})}})},ce=I({name:M().min(1,"Manufacturer name is required"),country:M().min(1,"Country is required")}),le=I({manufacturers:W(ce).min(1,"Add at least one manufacturer")});function ie({open:s,onOpenChange:r,onSubmit:a}){const t=V({resolver:J(le),defaultValues:{manufacturers:[{name:"",country:""}]}}),{fields:c,append:l,remove:i}=G({control:t.control,name:"manufacturers"}),x=u=>{a(u.manufacturers),t.reset()};return e.jsx(w,{open:s,onOpenChange:r,children:e.jsxs(E,{className:"max-w-2xl bg-white",children:[e.jsxs(F,{children:[e.jsx(D,{className:"text-[#4A36EC] text-xl font-bold",children:"Add Manufacturers"}),e.jsx(S,{className:"text-gray-600",children:"Add one or more manufacturers to the system"})]}),e.jsx(Q,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(x),className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:c.map((u,o)=>e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx(b,{control:t.control,name:`manufacturers.${o}.name`,render:({field:n})=>e.jsxs(v,{children:[e.jsx(C,{className:"text-gray-700",children:"Name"}),e.jsx(R,{children:e.jsx(Y,{placeholder:"Enter manufacturer name",className:"border-gray-200 focus:border-[#4A36EC] focus:ring-[#4A36EC]",...n})}),e.jsx(N,{className:"text-red-500"})]})}),e.jsx(b,{control:t.control,name:`manufacturers.${o}.country`,render:({field:n})=>e.jsxs(v,{children:[e.jsx(C,{className:"text-gray-700",children:"Country"}),e.jsx(L,{placeholder:"Enter country",defaultValue:n.value,onChange:h=>n.onChange(h.name)}),e.jsx(N,{className:"text-red-500"})]})})]}),c.length>1&&e.jsx(m,{type:"button",variant:"outline",size:"icon",className:"mt-8 hover:bg-gray-100",onClick:()=>i(o),children:e.jsx(Z,{className:"w-4 h-4 text-gray-600"})})]},u.id))}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(m,{type:"button",variant:"outline",className:"hover:bg-gray-100",onClick:()=>l({name:"",country:""}),children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Add Another"]}),e.jsx(m,{type:"submit",className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:"Save Manufacturers"})]})]})})]})})}function Ie(){const[s,r]=f.useState(!1),{data:a,isLoading:t,isError:c}=ne(),{mutate:l}=oe(),i=f.useMemo(()=>(a==null?void 0:a.data)||[],[a]),x=f.useMemo(()=>[{header:"Name",accessorKey:"name"},{header:"Country",accessorKey:"country"},{header:"Status",accessorKey:"status",cell:({row:n})=>{const h=n.original.status===1;return e.jsxs("span",{className:p("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",h?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"),children:[e.jsx("span",{className:p("w-1.5 h-1.5 rounded-full mr-1.5",h?"bg-green-400":"bg-red-400")}),h?"Active":"Inactive"]})}},{header:"Created On",accessorKey:"createdAt",cell:({row:n})=>e.jsx("span",{children:ee(new Date(n.original.createdAt),"yyyy/MM/dd HH:mm:a")})}],[]),u=n=>{console.log(n),l(n,{onSuccess:()=>{r(!1),j.success("Manufacturer created successfully")},onError:()=>{j.error("Failed to create manufacturer")}})};te();const o=[{title:"Total Manufacturers",value:i.length,Icon:O,description:"Active manufacturers in the system",trend:"+2.5%",trendUp:!0},{title:"Countries",value:new Set(i.map(n=>n.country)).size,Icon:_,description:"Countries represented",trend:"+1.2%",trendUp:!0},{title:"Vehicle Models",value:234,Icon:q,description:"Associated vehicle models",trend:"+5.4%",trendUp:!0},{title:"Parts Categories",value:56,Icon:z,description:"Available part categories",trend:"+3.1%",trendUp:!0}];return t?e.jsx("div",{className:"p-8 space-y-8",children:e.jsx(P,{})}):c?e.jsx("div",{children:"Error loading manufacturers"}):e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx("a",{href:"/",className:"hover:text-[#4A36EC]",children:"Dashboard"}),e.jsx(y,{className:"w-4 h-4 mx-2"}),e.jsx("a",{href:"/inventory",className:"hover:text-[#4A36EC]",children:"Inventory"}),e.jsx(y,{className:"w-4 h-4 mx-2"}),e.jsx("span",{className:"text-[#4A36EC] font-medium",children:"Manufacturers"})]}),e.jsxs(g.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-[#4A36EC]",children:"Manufacturers"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage car manufacturers in the system"})]}),e.jsxs(m,{onClick:()=>r(!0),className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Add Manufacturer"]})]}),e.jsx(U,{cards:o}),e.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:e.jsx(B,{columns:x,data:i,loading:t,tableStyle:"border rounded-lg bg-white",tableHeadClassName:"text-[#4A36EC] font-semibold"})}),e.jsx(ie,{open:s,onOpenChange:r,onSubmit:u})]})}export{Ie as default};
