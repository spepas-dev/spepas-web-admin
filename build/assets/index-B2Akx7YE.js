import{J as N,b as E,j as e,a as d,r as h,c as x,F as w,C as I,q as P,P as T,m as q,d as b}from"./index-C2Q_LmeJ.js";import{B as K,a as B,P as D}from"./pageHeader-7vhK00zh.js";import{D as H}from"./index-CvxHYYsL.js";import{u as U}from"./modal-helpers-CaXMt30Z.js";import{a as k,C as z}from"./card-grid-CZ4tobzV.js";import{u as G,a as L,F as Q,b as g,c as j,d as v,e as V,f as M}from"./form-CcMvRR1f.js";import{u as $}from"./useMutation-TZLAPFAD.js";import{u as J}from"./useQuery-CUE0UVvY.js";import{s as O,o as A,b as R,a as C}from"./index-DyAPY9a1.js";import{I as W}from"./input-fvZZM-h7.js";import{T as X}from"./trash-2-PgzqsL3V.js";import{P as F}from"./plus-BFloapdy.js";import{G as Y}from"./globe-C44rbEdp.js";import{f as Z}from"./format-CBpsKyOP.js";import"./table-CAIVgxvw.js";import"./dialog-BxdRvcNA.js";import"./select-K8uUziWX.js";import"./arrow-left-DT7SArHl.js";import"./arrow-right-Ct_-AZHB.js";import"./card-CVylEmF3.js";import"./popover-CI77UgAE.js";import"./utils-km2FGkQ4.js";const i={all:["manufactures"],detail:r=>[...i.all,"detail",r],lists:()=>[...i.all,"list"],list:r=>[...i.lists(),r],stats:()=>[...i.all,"stats"]},_=r=>J({queryKey:i.list({}),queryFn:()=>N.getManufactures(r)}),ee=()=>{const r=E();return $({mutationFn:a=>N.createManufacturer(a),onSuccess:()=>{r.invalidateQueries({queryKey:i.all})}})},re=A({name:C().min(1,"Manufacturer name is required"),country:C().min(1,"Country is required")}),ae=A({manufacturers:R(re).min(1,"Add at least one manufacturer")});function te({onSubmit:r,loading:a=!1}){const t=G({resolver:O(ae),defaultValues:{manufacturers:[{name:"",country:""}]}}),{fields:u,append:f,remove:p}=L({control:t.control,name:"manufacturers"}),o=c=>{r(c.manufacturers),t.reset()};return e.jsx(Q,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(o),className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:u.map((c,l)=>e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx(g,{control:t.control,name:`manufacturers.${l}.name`,render:({field:s})=>e.jsxs(j,{children:[e.jsx(v,{className:"text-gray-700",children:"Name"}),e.jsx(V,{children:e.jsx(W,{placeholder:"Enter manufacturer name",className:"border-gray-200 focus:border-[#4A36EC] focus:ring-[#4A36EC]",disabled:a,...s})}),e.jsx(M,{className:"text-red-500"})]})}),e.jsx(g,{control:t.control,name:`manufacturers.${l}.country`,render:({field:s})=>e.jsxs(j,{children:[e.jsx(v,{className:"text-gray-700",children:"Country"}),e.jsx(k,{placeholder:"Enter country",defaultValue:s.value,onChange:y=>s.onChange(y.name),disabled:a}),e.jsx(M,{className:"text-red-500"})]})})]}),u.length>1&&e.jsx(d,{type:"button",variant:"outline",size:"icon",className:"mt-8 hover:bg-gray-100",onClick:()=>p(l),disabled:a,children:e.jsx(X,{className:"w-4 h-4 text-gray-600"})})]},c.id))}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(d,{type:"button",variant:"outline",className:"hover:bg-gray-100",onClick:()=>f({name:"",country:""}),disabled:a,children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Add Another"]}),e.jsx(d,{type:"submit",className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",disabled:a,children:a?"Saving...":"Save Manufacturers"})]})]})})}function Fe(){const[r,a]=h.useState(!1),t=ee(),u=U(),f=async n=>{a(!0);try{await t.mutateAsync(n),b.success(`${n.length} manufacturer(s) created successfully`),u.close()}catch(m){console.error("Error creating manufacturers:",m),b.error("Failed to create manufacturers. Please try again.")}finally{a(!1)}},p=()=>{u.openForm({title:"Add Manufacturer",size:"md",showFooter:!1,children:e.jsx(te,{onSubmit:f,loading:r})})},{data:o,isLoading:c,isError:l}=_(),s=h.useMemo(()=>(o==null?void 0:o.data)||[],[o]),y=h.useMemo(()=>[{header:"Name",accessorKey:"name"},{header:"Country",accessorKey:"country"},{header:"Status",accessorKey:"status",cell:({row:n})=>{const m=n.original.status===1;return e.jsxs("span",{className:x("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",m?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"),children:[e.jsx("span",{className:x("w-1.5 h-1.5 rounded-full mr-1.5",m?"bg-green-400":"bg-red-400")}),m?"Active":"Inactive"]})}},{header:"Created On",accessorKey:"createdAt",cell:({row:n})=>e.jsx("span",{children:Z(new Date(n.original.createdAt),"yyyy/MM/dd HH:mm:a")})}],[]),S=[{title:"Total Manufacturers",value:s.length,Icon:w,description:"Active manufacturers in the system",trend:"+2.5%",trendUp:!0},{title:"Countries",value:new Set(s.map(n=>n.country)).size,Icon:Y,description:"Countries represented",trend:"+1.2%",trendUp:!0},{title:"Vehicle Models",value:234,Icon:I,description:"Associated vehicle models",trend:"+5.4%",trendUp:!0},{title:"Parts Categories",value:56,Icon:P,description:"Available part categories",trend:"+3.1%",trendUp:!0}];return c?e.jsx("div",{className:"p-8 space-y-8",children:e.jsx(T,{})}):l?e.jsx("div",{children:"Error loading manufacturers"}):e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsx(K,{items:B.threeTier("Inventory","/inventory","Manufacturers")}),e.jsx(D,{title:"Manufacturers",description:"Manage car manufacturers in the system",actions:e.jsxs(d,{onClick:p,className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Add Manufacturer"]})}),e.jsx(z,{cards:S}),e.jsx(q.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:e.jsx(H,{columns:y,data:s,loading:c,tableStyle:"border rounded-lg bg-white",tableHeadClassName:"text-[#4A36EC] font-semibold"})})]})}export{Fe as default};
