import{A as i,i as I,j as e,a as G,r as j,U as w,S as M,n as S,m as C}from"./index-CG3cDFil.js";import{D as U}from"./index-DVvBrNmU.js";import{C as T}from"./card-grid-DHAopdjS.js";import{u as F,F as P,b as l,c,d as u,e as m,f as p}from"./form-_i_eYalU.js";import{u as L}from"./useQuery-Nb54E3uG.js";import{s as R,o as V,a as g,b as d}from"./index-Cksdco4c.js";import{D as $,a as O,b as B,c as k,d as q}from"./dialog-V-TE0CwV.js";import{I as z}from"./input-0St3XTHq.js";import{M as b}from"./multi-select-CynJAMoS.js";import{T as J}from"./textarea-DGzpSrm1.js";import{M as K,F as _}from"./menu-DN3YGWkm.js";import{P as H}from"./plus-CgI7Ta1y.js";import"./table-CXQMyFfb.js";import"./sliders-horizontal-cnWW7Bce.js";import"./x-BgpYH4Yb.js";import"./select-xgui-4X2.js";import"./arrow-left-D8MtdBnI.js";import"./arrow-right-iy4TempS.js";import"./card-TUnhNMrf.js";import"./popover-P3KGh40z.js";import"./globe-CvmVd3kB.js";import"./badge-CWZmtTXQ.js";import"./wand-sparkles-C-ss3xfk.js";const x=I.ACCESS_MANAGEMENT.GROUP;class Q{static async getGroup(s){return i.get(`${x.DETAIL(s)}`)}static async createGroup(s){return i.post(x.CREATE,s)}static async updateGroup(s,a){return i.put(`${x}/${s}`,a)}static async deleteGroup(s){return i.delete(`${x}/${s}`)}static async getGroupStats(s){return i.get(`${x}/${s}/stats`)}static async getGroupList(s){return i.get(x.BASE,{params:s})}}const f={all:["group"],list:()=>[...f.all,"list"],details:o=>[...f.all,"details",o],stats:o=>[...f.all,"stats",o]},W=()=>L({queryKey:f.list(),queryFn:()=>Q.getGroupList()}),X=V({name:d().min(1,"Group name is required"),description:d().min(10,"Description must be at least 10 characters"),users:g(d()).min(1,"Select at least one user"),menuGroups:g(d()),menuItems:g(d()),permissions:g(d())}),v={users:[{value:"user1",label:"John Doe"},{value:"user2",label:"Jane Smith"},{value:"user3",label:"Bob Johnson"}],menuGroups:[{value:"group1",label:"Dashboard"},{value:"group2",label:"Users"},{value:"group3",label:"Settings"}],menuItems:[{value:"item1",label:"View Users"},{value:"item2",label:"Edit Profile"},{value:"item3",label:"System Settings"}],permissions:[{value:"perm1",label:"Create Users"},{value:"perm2",label:"Delete Users"},{value:"perm3",label:"View Reports"}]};function Y({open:o,onOpenChange:s,onSubmit:a}){const t=F({resolver:R(X),defaultValues:{name:"",description:"",users:[],menuGroups:[],menuItems:[],permissions:[]}}),h=r=>{const y={id:crypto.randomUUID(),...r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isActive:!1};a(y),t.reset()};return e.jsx($,{open:o,onOpenChange:s,children:e.jsxs(O,{className:"max-w-2xl bg-white",children:[e.jsxs(B,{children:[e.jsx(k,{className:"text-[#4A36EC] text-xl font-bold",children:"Add Group"}),e.jsx(q,{className:"text-gray-600",children:"Create a new group and assign access rights"})]}),e.jsx(P,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(h),className:"space-y-6",children:[e.jsx(l,{control:t.control,name:"name",render:({field:r})=>e.jsxs(c,{children:[e.jsx(u,{children:"Group Name"}),e.jsx(m,{children:e.jsx(z,{...r,placeholder:"Enter group name"})}),e.jsx(p,{})]})}),e.jsx(l,{control:t.control,name:"description",render:({field:r})=>e.jsxs(c,{children:[e.jsx(u,{children:"Description"}),e.jsx(m,{children:e.jsx(J,{...r,placeholder:"Enter group description"})}),e.jsx(p,{})]})}),e.jsx(l,{control:t.control,name:"users",render:({field:r})=>e.jsxs(c,{children:[e.jsx(u,{children:"Users"}),e.jsx(m,{children:e.jsx(b,{options:v.users,value:r.value,onValueChange:r.onChange,placeholder:"Select users"})}),e.jsx(p,{})]})}),e.jsx(l,{control:t.control,name:"menuGroups",render:({field:r})=>e.jsxs(c,{children:[e.jsx(u,{children:"Menu Groups"}),e.jsx(m,{children:e.jsx(b,{options:v.menuGroups,value:r.value,onValueChange:r.onChange,placeholder:"Select menu groups"})}),e.jsx(p,{})]})}),e.jsx(l,{control:t.control,name:"menuItems",render:({field:r})=>e.jsxs(c,{children:[e.jsx(u,{children:"Menu Items"}),e.jsx(m,{children:e.jsx(b,{options:v.menuItems,value:r.value,onValueChange:r.onChange,placeholder:"Select menu items"})}),e.jsx(p,{})]})}),e.jsx(l,{control:t.control,name:"permissions",render:({field:r})=>e.jsxs(c,{children:[e.jsx(u,{children:"Permissions"}),e.jsx(m,{children:e.jsx(b,{options:v.permissions,value:r.value,onValueChange:r.onChange,placeholder:"Select permissions"})}),e.jsx(p,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(G,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(G,{type:"submit",className:"bg-[#4A36EC] text-white",children:"Create Group"})]})]})})]})})}function Ge(){const[o,s]=j.useState(!1),[a,t]=j.useState([]),{data:h,isError:r,isLoading:y}=W();j.useEffect(()=>{h&&console.log(h.data)},[h]);const A=j.useMemo(()=>[{header:"Group Name",accessorKey:"name"}],[]),E=async n=>{try{t([...a,n]),s(!1)}catch(N){console.error("Failed to add group:",N)}},D=[{title:"Total Groups",value:a.length,Icon:w,description:"Active groups",trend:"+2.5%",trendUp:!0},{title:"Menu Access",value:new Set(a.flatMap(n=>[...n.menuGroups,...n.menuItems])).size,Icon:K,description:"Assigned menus",trend:"+1.8%",trendUp:!0},{title:"Permissions",value:new Set(a.flatMap(n=>n.permissions)).size,Icon:M,description:"Total permissions",trend:"+3.2%",trendUp:!0},{title:"Menu Groups",value:new Set(a.flatMap(n=>n.menuGroups)).size,Icon:_,description:"Assigned groups",trend:"+1.5%",trendUp:!0}];return e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx("a",{href:"/",className:"hover:text-[#4A36EC]",children:"Dashboard"}),e.jsx(S,{className:"w-4 h-4 mx-2"}),e.jsx("a",{href:"/access-control",className:"hover:text-[#4A36EC]",children:"Access Control"}),e.jsx(S,{className:"w-4 h-4 mx-2"}),e.jsx("span",{className:"text-[#4A36EC] font-medium",children:"Groups"})]}),e.jsxs(C.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-[#4A36EC]",children:"Groups"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage user groups and their access rights"})]}),e.jsxs(G,{onClick:()=>s(!0),className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Add Group"]})]}),e.jsx(T,{cards:D}),e.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:e.jsx(U,{data:a,columns:A,loading:y,tableStyle:"border rounded-lg bg-white",tableHeadClassName:"text-[#4A36EC] font-semibold"})}),e.jsx(Y,{open:o,onOpenChange:s,onSubmit:E})]})}export{Ge as default};
