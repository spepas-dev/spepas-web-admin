import{c as H,aa as w,a1 as v,aM as k,r as d,j as e,aN as h,G as I,p as N,q as j,e as P,ab as A,aC as T,I as U,D as M,s as L,v as K,w as R,C as Z,az as G,U as B,m as V,b as z,a2 as Q,a3 as W,a4 as F,d as O,a5 as X,a6 as $,a7 as C,a8 as _}from"./index-BEfPUQd3.js";import{C as E}from"./circle-x-Bb9PP882.js";import{C as J}from"./circle-check-big-ByrHa0pu.js";import{C as b}from"./clock-GP2YY6dA.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],ee=H("Archive",Y);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],ae=H("UserX",se),q=[{id:1,request_ID:"3fa85f64-5717-4562-b3fc-2c963f66afa6",SparePart_ID:"6a2a9842-8f5c-44df-b951-f870907ba939",sparePart:{name:"Brake Pad Set",category:"Braking System"},requester:{User_ID:"4fa85f64-5717-4562-b3fc-2c963f66afa7",name:"David Customer"},quantity:2,status:2,priority:"HIGH",date_assigned:"2025-04-20T18:32:44.035Z",date_completed:"2025-04-22T14:20:30.120Z",completion_time:"1.8 days",createdAt:"2025-04-20T15:30:28.510Z"},{id:2,request_ID:"4fa85f64-5717-4562-b3fc-2c963f66afa7",SparePart_ID:"7a2a9842-8f5c-44df-b951-f870907ba940",sparePart:{name:"Engine Oil Filter",category:"Engine Parts"},requester:{User_ID:"5fa85f64-5717-4562-b3fc-2c963f66afa8",name:"Sarah Johnson"},quantity:1,status:2,priority:"MEDIUM",date_assigned:"2025-04-18T16:20:30.120Z",date_completed:"2025-04-21T10:15:45.300Z",completion_time:"2.7 days",createdAt:"2025-04-18T14:15:20.300Z"},{id:3,request_ID:"5fa85f64-5717-4562-b3fc-2c963f66afa8",SparePart_ID:"8a2a9842-8f5c-44df-b951-f870907ba941",sparePart:{name:"Air Filter",category:"Engine Parts"},requester:{User_ID:"6fa85f64-5717-4562-b3fc-2c963f66afa9",name:"Michael Brown"},quantity:3,status:4,priority:"LOW",date_assigned:"2025-04-15T09:15:30.200Z",date_cancelled:"2025-04-16T11:30:20.150Z",cancellation_reason:"Customer cancelled order",createdAt:"2025-04-15T08:10:15.100Z"}],te=()=>{const l=w(),{id:g}=v(),{data:n,isLoading:y,isError:f}=k(g),u=d.useMemo(()=>(n==null?void 0:n.data)||[],[n]);d.useEffect(()=>{console.log("Assigned history:",u)},[u]);const[m,s]=d.useState(""),t=d.useCallback(a=>{l(`/order-management/orders/requests/${a}`)},[l]),c=q.filter(a=>a.sparePart.name.toLowerCase().includes(m.toLowerCase())||a.requester.name.toLowerCase().includes(m.toLowerCase())||a.sparePart.category.toLowerCase().includes(m.toLowerCase())),r=d.useMemo(()=>[{header:"Request ID",accessorKey:"request_ID",cell:({row:a})=>e.jsxs("span",{className:"text-xs font-mono text-muted-foreground",children:["#",a.original.request_ID.slice(-8)]})},{header:"Spare Part",accessorKey:"sparePart.name",cell:({row:a})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-sm",children:a.original.sparePart.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:a.original.sparePart.category})]})},{header:"Requester",accessorKey:"requester.name",cell:({row:a})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-sm",children:a.original.requester.name}),e.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:a.original.requester.User_ID.slice(-8)})]})},{header:"Quantity",accessorKey:"quantity",cell:({row:a})=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(h,{className:"h-3 w-3 mr-1 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:a.original.quantity})]})},{header:"Priority",accessorKey:"priority",cell:({row:a})=>{const i=a.original.priority;return e.jsx(I,{variant:i==="HIGH"?"destructive":i==="MEDIUM"?"default":"secondary",className:"text-xs",children:i})}},{header:"Status",accessorKey:"status",cell:({row:a})=>{const i=a.original.status,o={2:{label:"Completed",color:"bg-green-100 text-green-800 border-green-200",icon:J},4:{label:"Cancelled",color:"bg-red-100 text-red-800 border-red-200",icon:E}}[i],S=(o==null?void 0:o.icon)||b;return e.jsxs("span",{className:N("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border",(o==null?void 0:o.color)||"bg-gray-100 text-gray-800 border-gray-200"),children:[e.jsx(S,{className:"w-3 h-3 mr-1"}),(o==null?void 0:o.label)||"Unknown"]})}},{header:"Completion Time",accessorKey:"completion_time",cell:({row:a})=>{const i=a.original.completion_time;return a.original.status===4?e.jsx("span",{className:"text-xs text-red-600",children:"Cancelled"}):i?e.jsx("span",{className:"text-xs font-medium text-green-600",children:i}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})}},{header:"Date Completed",accessorKey:"date_completed",cell:({row:a})=>{const i=a.original.date_completed,p=a.original.date_cancelled;return a.original.status===4&&p?e.jsx("span",{className:"text-xs font-medium text-red-600",children:j(new Date(p),"dd/MM/yyyy HH:mm")}):i?e.jsx("span",{className:"text-xs font-medium",children:j(new Date(i),"dd/MM/yyyy HH:mm")}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})}},{header:"Actions",accessorKey:"actions",cell:({row:a})=>e.jsxs(P,{variant:"outline",size:"sm",className:"border-[#4A36EC] text-[#4A36EC] hover:bg-[#4A36EC] hover:text-white text-xs px-2 py-1",onClick:()=>t(a.original.request_ID),children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),"View Details"]})}],[t]);return y?e.jsx("div",{children:"Loading..."}):f?e.jsx("div",{children:"Error loading assigned history"}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(T,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(U,{placeholder:"Search assigned history...",className:"pl-8",value:m,onChange:a=>s(a.target.value)})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[c.length," of ",q.length," records"]})]}),e.jsx(M,{data:c,columns:r,loading:!1,tableStyle:"border rounded-lg bg-white",tableHeadClassName:"text-[#4A36EC] font-semibold"}),c.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(h,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No assigned history found"}),m&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Try adjusting your search criteria"})]})]})},D=[{id:4,request_ID:"6fa85f64-5717-4562-b3fc-2c963f66afa9",SparePart_ID:"9a2a9842-8f5c-44df-b951-f870907ba942",sparePart:{name:"Spark Plugs",category:"Ignition System"},requester:{User_ID:"7fa85f64-5717-4562-b3fc-2c963f66afaa",name:"Lisa Wilson"},quantity:4,status:5,priority:"HIGH",date_created:"2025-04-10T11:30:45.150Z",date_expired:"2025-04-15T11:30:45.150Z",expiry_reason:"No assignment within timeout period",days_unassigned:5},{id:5,request_ID:"7fa85f64-5717-4562-b3fc-2c963f66afaa",SparePart_ID:"aa2a9842-8f5c-44df-b951-f870907ba943",sparePart:{name:"Transmission Fluid",category:"Fluids & Lubricants"},requester:{User_ID:"8fa85f64-5717-4562-b3fc-2c963f66afab",name:"Robert Davis"},quantity:1,status:4,priority:"MEDIUM",date_created:"2025-04-12T14:45:20.800Z",date_cancelled:"2025-04-14T16:20:10.500Z",cancellation_reason:"Customer found alternative supplier",days_unassigned:2},{id:6,request_ID:"8fa85f64-5717-4562-b3fc-2c963f66afab",SparePart_ID:"ba2a9842-8f5c-44df-b951-f870907ba944",sparePart:{name:"Windshield Wipers",category:"Exterior Parts"},requester:{User_ID:"9fa85f64-5717-4562-b3fc-2c963f66afac",name:"Jennifer Smith"},quantity:2,status:5,priority:"LOW",date_created:"2025-04-08T08:15:30.200Z",date_expired:"2025-04-11T08:15:30.200Z",expiry_reason:"Request timeout - no available gopas",days_unassigned:3}],re=()=>{const l=w(),{id:g}=v();console.log("Gopa ID:",g);const[n,y]=d.useState(""),f=d.useCallback(s=>{l(`/order-management/orders/requests/${s}`)},[l]),u=D.filter(s=>s.sparePart.name.toLowerCase().includes(n.toLowerCase())||s.requester.name.toLowerCase().includes(n.toLowerCase())||s.sparePart.category.toLowerCase().includes(n.toLowerCase())),m=d.useMemo(()=>[{header:"Request ID",accessorKey:"request_ID",cell:({row:s})=>e.jsxs("span",{className:"text-xs font-mono text-muted-foreground",children:["#",s.original.request_ID.slice(-8)]})},{header:"Spare Part",accessorKey:"sparePart.name",cell:({row:s})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-sm",children:s.original.sparePart.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.original.sparePart.category})]})},{header:"Requester",accessorKey:"requester.name",cell:({row:s})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-sm",children:s.original.requester.name}),e.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:s.original.requester.User_ID.slice(-8)})]})},{header:"Quantity",accessorKey:"quantity",cell:({row:s})=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(h,{className:"h-3 w-3 mr-1 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:s.original.quantity})]})},{header:"Priority",accessorKey:"priority",cell:({row:s})=>{const t=s.original.priority;return e.jsx(I,{variant:t==="HIGH"?"destructive":t==="MEDIUM"?"default":"secondary",className:"text-xs",children:t})}},{header:"Status",accessorKey:"status",cell:({row:s})=>{const t=s.original.status,r={4:{label:"Cancelled",color:"bg-red-100 text-red-800 border-red-200",icon:E},5:{label:"Expired",color:"bg-orange-100 text-orange-800 border-orange-200",icon:b}}[t],a=(r==null?void 0:r.icon)||ae;return e.jsxs("span",{className:N("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border",(r==null?void 0:r.color)||"bg-gray-100 text-gray-800 border-gray-200"),children:[e.jsx(a,{className:"w-3 h-3 mr-1"}),(r==null?void 0:r.label)||"Unknown"]})}},{header:"Days Unassigned",accessorKey:"days_unassigned",cell:({row:s})=>{const t=s.original.days_unassigned;return e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"h-3 w-3 mr-1 text-muted-foreground"}),e.jsxs("span",{className:N("text-sm font-medium",t>3?"text-red-600":t>1?"text-orange-600":"text-green-600"),children:[t," ",t===1?"day":"days"]})]})}},{header:"Reason",accessorKey:"reason",cell:({row:s})=>{const t=s.original.expiry_reason,c=s.original.cancellation_reason,r=t||c||"Unknown";return e.jsx("div",{className:"max-w-xs",children:e.jsx("span",{className:"text-xs text-muted-foreground truncate block",title:r,children:r})})}},{header:"Date Closed",accessorKey:"date_closed",cell:({row:s})=>{const t=s.original.date_expired,c=s.original.date_cancelled,r=s.original.status;return r===4&&c?e.jsx("span",{className:"text-xs font-medium text-red-600",children:j(new Date(c),"dd/MM/yyyy HH:mm")}):r===5&&t?e.jsx("span",{className:"text-xs font-medium text-orange-600",children:j(new Date(t),"dd/MM/yyyy HH:mm")}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})}},{header:"Actions",accessorKey:"actions",cell:({row:s})=>e.jsxs(P,{variant:"outline",size:"sm",className:"border-[#4A36EC] text-[#4A36EC] hover:bg-[#4A36EC] hover:text-white text-xs px-2 py-1",onClick:()=>f(s.original.request_ID),children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),"View Details"]})}],[f]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(T,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(U,{placeholder:"Search unassigned history...",className:"pl-8",value:n,onChange:s=>y(s.target.value)})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[u.length," of ",D.length," records"]})]}),e.jsx(M,{data:u,columns:m,loading:!1,tableStyle:"border rounded-lg bg-white",tableHeadClassName:"text-[#4A36EC] font-semibold"}),u.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(h,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No unassigned history found"}),n&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Try adjusting your search criteria"})]})]})},x={totalAssignedHistory:89,totalUnassignedHistory:34,completedRequests:67,averageCompletionTime:"2.5 days"};function de(){const{id:l}=v();console.log("Gopa ID:",l);const[g,n]=d.useState("assigned"),y=[{title:"Assigned History",value:x.totalAssignedHistory,Icon:ee,description:"Completed assigned requests",trend:"+12.5%",trendUp:!0},{title:"Unassigned History",value:x.totalUnassignedHistory,Icon:G,description:"Historical unassigned requests",trend:"+3.2%",trendUp:!0},{title:"Completed Requests",value:x.completedRequests,Icon:B,description:"Successfully completed",trend:"+8.7%",trendUp:!0},{title:"Avg Completion Time",value:x.averageCompletionTime,Icon:b,description:"Average time to complete",trend:"-0.5 days",trendUp:!0}];return e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsx(L,{items:K.fourTier("Order Management","/order-management/orders","Gopas","/order-management/orders/gopas","History")}),e.jsx(R,{title:"Gopa History",description:"View assigned and unassigned request history for this gopa"}),e.jsx(Z,{cards:y}),e.jsx(V.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:e.jsxs(z,{children:[e.jsxs(Q,{children:[e.jsx(W,{className:"text-lg font-semibold text-[#4A36EC]",children:"Request History"}),e.jsx(F,{children:"View and analyze assigned and unassigned request history"})]}),e.jsx(O,{children:e.jsxs(X,{value:g,onValueChange:n,className:"w-full",children:[e.jsxs($,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsxs(C,{value:"assigned",className:"data-[state=active]:bg-[#4A36EC] data-[state=active]:text-white",children:["Assigned History (",x.totalAssignedHistory,")"]}),e.jsxs(C,{value:"unassigned",className:"data-[state=active]:bg-[#4A36EC] data-[state=active]:text-white",children:["Unassigned History (",x.totalUnassignedHistory,")"]})]}),e.jsx(_,{value:"assigned",className:"space-y-4",children:e.jsxs("div",{className:"border rounded-lg p-4 bg-green-50/50",children:[e.jsx("h3",{className:"text-sm font-medium text-[#10B981] mb-2",children:"Assigned History"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Historical records of requests assigned to this gopa"}),e.jsx(te,{})]})}),e.jsx(_,{value:"unassigned",className:"space-y-4",children:e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50/50",children:[e.jsx("h3",{className:"text-sm font-medium text-[#6B7280] mb-2",children:"Unassigned History"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Historical records of unassigned requests"}),e.jsx(re,{})]})})]})})]})})]})}export{de as default};
