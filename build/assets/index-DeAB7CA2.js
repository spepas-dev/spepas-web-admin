import{e as n,A as I,j as e,x as r,a as x,r as g,c as h,n as F,U as M,m as U,d as b}from"./index-C2Q_LmeJ.js";import{B as T,a as w,P as D}from"./pageHeader-7vhK00zh.js";import{D as B}from"./index-CvxHYYsL.js";import{u as P}from"./modal-helpers-CaXMt30Z.js";import{C as _}from"./card-grid-CZ4tobzV.js";import{u as $,F as K,b as y,c as v,d as f,e as j,f as S}from"./form-CcMvRR1f.js";import{u as R}from"./useQuery-CUE0UVvY.js";import{s as L,z as m}from"./index-DyAPY9a1.js";import{M as N}from"./multi-select-GP_yjtwv.js";import{E as O}from"./eye-BlX2KCq1.js";import{H}from"./hammer-CyD9b5cA.js";import{P as k}from"./plus-BFloapdy.js";import{f as V}from"./format-CBpsKyOP.js";import"./table-CAIVgxvw.js";import"./dialog-BxdRvcNA.js";import"./select-K8uUziWX.js";import"./arrow-left-DT7SArHl.js";import"./arrow-right-Ct_-AZHB.js";import"./card-CVylEmF3.js";import"./popover-CI77UgAE.js";import"./globe-C44rbEdp.js";import"./utils-km2FGkQ4.js";import"./badge-rX3Jh1SJ.js";import"./separator-q4J_vRT3.js";import"./circle-x-DWBwq746.js";import"./wand-sparkles-JjYTZCVz.js";const c=I.USER_MANAGEMENT.GORO;class z{static async registerGoro(s){return n.post(`${c}`,s)}static async getGoro(s){return n.get(`${c}/${s}`)}static async updateGoro(s,o){return n.put(`${c}/${s}`,o)}static async deleteGoro(s){return n.delete(`${c}/${s}`)}static async getGoroStats(s){return n.get(`${c}/${s}/stats`)}static async getGoroList(s){return n.get(`${c.BASE}`,{params:s})}}const u={all:["goro"],list:()=>[...u.all,"list"],details:a=>[...u.all,"details",a],stats:a=>[...u.all,"stats",a]},q=()=>R({queryKey:u.list(),queryFn:()=>z.getGoroList()}),J=m.object({User_ID:m.string().min(1,"Please select a user"),specialties:m.array(m.string()).min(1,"Add at least one specialty")}),Q=[{value:"user1",label:"John Doe",icon:r},{value:"user2",label:"Jane Smith",icon:r}],Y=[{value:"TYRES",label:"Tyres",icon:r},{value:"FAN_BELT",label:"Fan Belt",icon:r},{value:"ENGINE",label:"Engine",icon:r},{value:"BRAKES",label:"Brakes",icon:r},{value:"TRANSMISSION",label:"Transmission",icon:r},{value:"ELECTRICAL",label:"Electrical",icon:r},{value:"AC_SYSTEM",label:"AC System",icon:r},{value:"SUSPENSION",label:"Suspension",icon:r}];function W({onSubmit:a,loading:s=!1}){const o=$({resolver:L(J),defaultValues:{User_ID:"",specialties:[]}}),p=t=>{const d={User_ID:t.User_ID,specialties:t.specialties};a(d),o.reset()};return e.jsx(K,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(p),className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"flex gap-4 items-start",children:e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx(y,{control:o.control,name:"User_ID",render:({field:t})=>e.jsxs(v,{children:[e.jsx(f,{className:"text-gray-700",children:"Select Mechanic"}),e.jsx(j,{children:e.jsx(N,{options:Q,value:[t.value],onValueChange:d=>t.onChange(d[0]),placeholder:"Select a mechanic",maxCount:1,variant:"default",disabled:s})}),e.jsx(S,{className:"text-red-500"})]})}),e.jsx(y,{control:o.control,name:"specialties",render:({field:t})=>e.jsxs(v,{children:[e.jsx(f,{className:"text-gray-700",children:"Specialties"}),e.jsx(j,{children:e.jsx(N,{options:Y,value:t.value,onValueChange:t.onChange,placeholder:"Select specialties",variant:"secondary",disabled:s})}),e.jsx(S,{className:"text-red-500"})]})})]})})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(x,{type:"submit",className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",disabled:s,children:s?"Saving...":"Save Goro"})})]})})}function Ae(){const{data:a,isLoading:s}=q(),o=g.useMemo(()=>(a==null?void 0:a.data)||[],[a==null?void 0:a.data]),p=g.useMemo(()=>[{header:"Name",accessorKey:"name"},{header:"Email",accessorKey:"email"},{header:"Specialties",accessorKey:"specialties",cell:({row:i})=>{var l;return e.jsx("div",{className:"flex flex-wrap gap-1",children:(l=i.original.specialties)==null?void 0:l.map((G,C)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:G},C))})}},{header:"Status",accessorKey:"status",cell:({row:i})=>{const l=i.original.status===1;return e.jsxs("span",{className:h("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",l?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"),children:[e.jsx("span",{className:h("w-1.5 h-1.5 rounded-full mr-1.5",l?"bg-green-400":"bg-red-400")}),l?"Active":"Inactive"]})}},{header:"Date Added",accessorKey:"createdAt",cell:({row:i})=>e.jsx("div",{children:V(i.original.createdAt,"dd/MM/yyyy HH:mm:ss a")})},{header:"Actions",accessorKey:"actions",cell:()=>e.jsxs(x,{size:"sm",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"View"]})}],[]),t=P(),d=()=>{t.openForm({title:"Add New Goro",children:e.jsx(W,{onSubmit:A,loading:!1}),showFooter:!1})},A=async i=>{try{console.log(i),b.success("Goro created successfully"),t.close()}catch{b.error("Failed to create goro")}},E=[{title:"Total goro",value:o.length,Icon:r,description:"Active goro in system",trend:"+3.2%",trendUp:!0},{title:"Specialties",value:"10",Icon:H,description:"Different specializations",trend:"+2.4%",trendUp:!0},{title:"Average Skills",value:"10",Icon:F,description:"Skills per mechanic",trend:"+1.8%",trendUp:!0},{title:"Pending Approvals",value:"5",Icon:M,description:"goro awaiting approval",trend:"+0.9%",trendUp:!1}];return e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsx(T,{items:w.threeTier("User Management","/user-management","Goro")}),e.jsx(D,{title:"Goro",description:"Manage goro and their specialties",actions:e.jsxs(x,{onClick:d,className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Add Goro"]})}),e.jsx(_,{cards:E}),e.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:e.jsx(B,{data:o,columns:p,loading:s,tableStyle:"border rounded-lg bg-white",tableHeadClassName:"text-[#4A36EC] font-semibold"})})]})}export{Ae as default};
