import{r as u,j as e,a as _,c as a,ac as $,k as v,i as b}from"./index-C2Q_LmeJ.js";import{B as y}from"./badge-rX3Jh1SJ.js";import{P as R,a as W,b as X,C as F,c as G,d as L,e as q,f as N,g as x,h as z}from"./popover-CI77UgAE.js";import{S as w}from"./separator-q4J_vRT3.js";import{C as S}from"./circle-x-DWBwq746.js";import{X as H}from"./dialog-BxdRvcNA.js";import{W as J}from"./wand-sparkles-JjYTZCVz.js";const C=$("m-1 transition ease-in-out delay-150 hover:-translate-y-1 hover:scale-110 duration-300",{variants:{variant:{default:"border-foreground/10 text-foreground bg-card hover:bg-card/80",secondary:"border-foreground/10 bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",inverted:"inverted"}},defaultVariants:{variant:"default"}}),Q=u.forwardRef(({options:n,onValueChange:l,variant:g,defaultValue:k=[],placeholder:P="Select options",animation:f=0,maxCount:i=3,modalPopover:D=!1,asChild:U=!1,className:E,...I},O)=>{const[t,o]=u.useState(k),[A,c]=u.useState(!1),[d,B]=u.useState(!1),V=s=>{if(s.key==="Enter")c(!0);else if(s.key==="Backspace"&&!s.currentTarget.value){const r=[...t];r.pop(),o(r),l(r)}},j=s=>{const r=t.includes(s)?t.filter(m=>m!==s):[...t,s];o(r),l(r)},h=()=>{o([]),l([])},K=()=>{c(s=>!s)},M=()=>{const s=t.slice(0,i);o(s),l(s)},T=()=>{if(t.length===n.length)h();else{const s=n.map(r=>r.value);o(s),l(s)}};return e.jsxs(R,{open:A,onOpenChange:c,modal:D,children:[e.jsx(W,{asChild:!0,children:e.jsx(_,{ref:O,...I,onClick:K,className:a("flex w-full p-1 rounded-md border min-h-10 h-auto items-center justify-between bg-inherit hover:bg-inherit [&_svg]:pointer-events-auto",E),children:t.length>0?e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsxs("div",{className:"flex flex-wrap items-center",children:[t.slice(0,i).map(s=>{const r=n.find(p=>p.value===s),m=r==null?void 0:r.icon;return e.jsxs(y,{className:a(d?"animate-bounce":"",C({variant:g})),style:{animationDuration:`${f}s`},children:[m&&e.jsx(m,{className:"h-4 w-4 mr-2"}),r==null?void 0:r.label,e.jsx(S,{className:"ml-2 h-4 w-4 cursor-pointer",onClick:p=>{p.stopPropagation(),j(s)}})]},s)}),t.length>i&&e.jsxs(y,{className:a("bg-transparent text-foreground border-foreground/1 hover:bg-transparent",d?"animate-bounce":"",C({variant:g})),style:{animationDuration:`${f}s`},children:[`+ ${t.length-i} more`,e.jsx(S,{className:"ml-2 h-4 w-4 cursor-pointer",onClick:s=>{s.stopPropagation(),M()}})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(H,{className:"h-4 mx-2 cursor-pointer text-muted-foreground",onClick:s=>{s.stopPropagation(),h()}}),e.jsx(w,{orientation:"vertical",className:"flex min-h-6 h-full"}),e.jsx(v,{className:"h-4 mx-2 cursor-pointer text-muted-foreground"})]})]}):e.jsxs("div",{className:"flex items-center justify-between w-full mx-auto",children:[e.jsx("span",{className:"text-sm text-muted-foreground mx-3",children:P}),e.jsx(v,{className:"h-4 cursor-pointer text-muted-foreground mx-2"})]})})}),e.jsx(X,{className:"w-auto p-0",align:"start",onEscapeKeyDown:()=>c(!1),children:e.jsxs(F,{children:[e.jsx(G,{placeholder:"Search...",onKeyDown:V}),e.jsxs(L,{children:[e.jsx(q,{children:"No results found."}),e.jsxs(N,{children:[e.jsxs(x,{onSelect:T,className:"cursor-pointer",children:[e.jsx("div",{className:a("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",t.length===n.length?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(b,{className:"h-4 w-4"})}),e.jsx("span",{children:"(Select All)"})]},"all"),n.map(s=>{const r=t.includes(s.value);return e.jsxs(x,{onSelect:()=>j(s.value),className:"cursor-pointer",children:[e.jsx("div",{className:a("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",r?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(b,{className:"h-4 w-4"})}),s.icon&&e.jsx(s.icon,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s.label})]},s.value)})]}),e.jsx(z,{}),e.jsx(N,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[t.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(x,{onSelect:h,className:"flex-1 justify-center cursor-pointer",children:"Clear"}),e.jsx(w,{orientation:"vertical",className:"flex min-h-6 h-full"})]}),e.jsx(x,{onSelect:()=>c(!1),className:"flex-1 justify-center cursor-pointer max-w-full",children:"Close"})]})})]})]})}),f>0&&t.length>0&&e.jsx(J,{className:a("cursor-pointer my-2 text-foreground bg-background w-3 h-3",d?"":"text-muted-foreground"),onClick:()=>B(!d)})]})});Q.displayName="MultiSelect";export{Q as M};
