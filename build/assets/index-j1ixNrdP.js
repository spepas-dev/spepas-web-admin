import{c as U,g as M,j as e,a9 as g,F as T,i as j,k as f,l as b,n as y,I as k,o as N,e as m,aa as z,r as u,p as C,ab as B,ac as L,ad as K,s as _,v as q,w as G,C as H,m as R,D as O,x as d}from"./index-BEfPUQd3.js";import{u as $}from"./modal-helpers-u5ghZSiS.js";import{u as V,a as X}from"./application.mutations-Dx6O_Aqv.js";import{u as J}from"./applications.queries-B_YvO4f9.js";import{s as Q}from"./zod-DPUoip6C.js";import{z as x}from"./index-3Gi9B8Cu.js";import{T as W}from"./textarea-BpM5EgwI.js";import{C as Y}from"./clock-GP2YY6dA.js";import{C as Z}from"./circle-check-big-ByrHa0pu.js";import{C as D}from"./circle-x-Bb9PP882.js";import{P as ee}from"./plus-D6nxsE-o.js";import"./dialog-DfEuW_jS.js";import"./useMutation-CxnX3va-.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],ae=U("Pencil",se),te=x.object({name:x.string().min(1,"Application name is required"),description:x.string().min(1,"Description is required")});function v({onSubmit:o,loading:n=!1,mode:c="create",initialData:a}){const l=M({resolver:Q(te),defaultValues:{name:(a==null?void 0:a.name)||"",description:(a==null?void 0:a.description)||""}}),p=t=>{if(c==="create"){const r={name:t.name,description:t.description};o(r)}else{const r={name:t.name,description:t.description};o(r)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5 text-[#4A36EC]"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:c==="create"?"Application Information":"Update Application"})]}),e.jsx(T,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(p),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(j,{control:l.control,name:"name",render:({field:t})=>e.jsxs(f,{children:[e.jsx(b,{className:"text-gray-700",children:"Application Name *"}),e.jsx(y,{children:e.jsx(k,{...t,placeholder:"Enter application name",className:"border-gray-200 focus:border-[#4A36EC] focus:ring-[#4A36EC]",disabled:n})}),e.jsx(N,{className:"text-red-500"})]})}),e.jsx(j,{control:l.control,name:"description",render:({field:t})=>e.jsxs(f,{children:[e.jsx(b,{className:"text-gray-700",children:"Description *"}),e.jsx(y,{children:e.jsx(W,{...t,placeholder:"Enter application description",className:"border-gray-200 focus:border-[#4A36EC] focus:ring-[#4A36EC]",disabled:n,rows:4})}),e.jsx(N,{className:"text-red-500"})]})})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(m,{type:"submit",className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",disabled:n,children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),n?c==="create"?"Creating...":"Updating...":c==="create"?"Create Application":"Update Application"]})})]})})]})}const ge=()=>{var A;const{data:o,isLoading:n}=J(),c=z(),a=u.useMemo(()=>(o==null?void 0:o.data)||[],[o==null?void 0:o.data]),l=u.useMemo(()=>[{header:"Serial",accessorKey:"serial",cell:({row:s})=>e.jsx("span",{className:"text-gray-600",children:s.index+1})},{header:"Name",accessorKey:"name"},{header:"Description",accessorKey:"description"},{header:"Status",accessorKey:"status",cell:({row:s})=>{const i=s.original.status===1;return e.jsxs("span",{className:C("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",i?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"),children:[e.jsx("span",{className:C("w-1.5 h-1.5 rounded-full mr-1.5",i?"bg-green-400":"bg-red-400")}),i?"Active":"Inactive"]})}},{header:"Actions",id:"actions",accessorKey:"actions",cell:({row:s})=>{const i=s.original;return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{size:"sm",variant:"outline",className:"hover:bg-[#4A36EC] hover:text-white hover:cursor-pointer",onClick:()=>c(L.ACCESS_MANAGEMENT.APPLICATION.DETAIL(i.application_id)),children:e.jsx(B,{className:"w-4 h-4"})}),e.jsx(m,{size:"sm",variant:"outline",className:"hover:bg-[#4A36EC] hover:text-white hover:cursor-pointer",onClick:()=>S(i),children:e.jsx(ae,{className:"w-4 h-4"})})]})}}],[]),p=$(),t=V(),[r,h]=u.useState(null),E=X(((A=r==null?void 0:r.id)==null?void 0:A.toString())||""),w=async s=>{try{await t.mutateAsync(s),d.success(`${s.name} created successfully`),p.close()}catch(i){console.error("Error creating application:",i),d.error("Failed to create application. Please try again.")}},F=async s=>{if(console.log("selectedApplication",r),!!r)try{console.log("applicationData",s),await E.mutateAsync(s),d.success(`${r.name} updated successfully`),p.close(),h(null)}catch(i){console.error("Error updating application:",i),d.error("Failed to update application. Please try again.")}},S=s=>{h(s),p.openForm({title:"Update Application",size:"lg",showFooter:!1,children:e.jsx(v,{onSubmit:F,mode:"update",initialData:s})})},P=()=>{p.openForm({title:"Create New Application",size:"lg",showFooter:!1,children:e.jsx(v,{onSubmit:s=>w(s)})})},I=[{title:"Total Applications",value:a.length,Icon:K,description:"Total applications received",trend:"+3.2%",trendUp:!0},{title:"Pending Applications",value:0,Icon:Y,description:"Applications pending review",trend:"+2.1%",trendUp:!0},{title:"Approved Applications",value:a.filter(s=>s.status===1).length,Icon:Z,description:"Applications approved",trend:"+5.4%",trendUp:!0},{title:"Rejected Applications",value:0,Icon:D,description:"Applications rejected",trend:"-1.2%",trendUp:!1}];return e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsx(_,{items:q.threeTier("Access Management","/access-management","Applications")}),e.jsx(G,{title:"Applications",description:"Manage system applications and access requests",actions:e.jsxs(m,{onClick:P,className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Add Application"]})}),e.jsx(H,{cards:I}),e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:e.jsx(O,{data:a,columns:l,loading:n,tableStyle:"border rounded-lg bg-white",tableHeadClassName:"text-[#4A36EC] font-semibold"})})]})};export{ge as default};
