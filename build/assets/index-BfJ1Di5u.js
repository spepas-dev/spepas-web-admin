import{e as i,A,r as h,j as e,v as x,a as E,c as S,U as I,m as M,d as f}from"./index-C2Q_LmeJ.js";import{B as G,a as D,P as C}from"./pageHeader-7vhK00zh.js";import{D as F}from"./index-CvxHYYsL.js";import{u as P}from"./modal-helpers-CaXMt30Z.js";import{C as U}from"./card-grid-CZ4tobzV.js";import{u as _,F as w,b,c as j,d as y,e as N,f as v}from"./form-CcMvRR1f.js";import{u as $}from"./useQuery-CUE0UVvY.js";import{s as L,z as n}from"./index-DyAPY9a1.js";import{u as B,G as K,M as T}from"./esm-TUw15Obf.js";import{I as R}from"./input-fvZZM-h7.js";import{M as V}from"./multi-select-GP_yjtwv.js";import{M as k}from"./map-pin-D3JmskLF.js";import{S as q}from"./shopping-bag-NHqPbCF3.js";import{P as z}from"./plus-BFloapdy.js";import"./table-CAIVgxvw.js";import"./dialog-BxdRvcNA.js";import"./select-K8uUziWX.js";import"./arrow-left-DT7SArHl.js";import"./arrow-right-Ct_-AZHB.js";import"./card-CVylEmF3.js";import"./popover-CI77UgAE.js";import"./globe-C44rbEdp.js";import"./utils-km2FGkQ4.js";import"./badge-rX3Jh1SJ.js";import"./separator-q4J_vRT3.js";import"./circle-x-DWBwq746.js";import"./wand-sparkles-JjYTZCVz.js";const c=A.USER_MANAGEMENT.SELLER;class J{static async registerSeller(r){return i.post(`${c}`,r)}static async getSeller(r){return i.get(`${c}/${r}`)}static async updateSeller(r,a){return i.put(`${c}/${r}`,a)}static async deleteSeller(r){return i.delete(`${c}/${r}`)}static async getSellerStats(r){return i.get(`${c}/${r}/stats`)}static async getSellerList(r){return i.get(`${c.BASE}`,{params:r})}}const u={all:["sellers"],list:()=>[...u.all,"list"],details:t=>[...u.all,"details",t],stats:t=>[...u.all,"stats",t]},O=()=>$({queryKey:u.list(),queryFn:()=>J.getSellerList()}),Q=n.object({storeName:n.string().min(1,"Store name is required"),longitude:n.number(),latitude:n.number(),Gopa_ID:n.string().min(1,"Please select a Gopo"),User_ID:n.string().min(1,"Please select a user")}),H=[{value:"528008c6-d9fd-4590-ad84-6b9a42b84197",label:"John Doe",icon:x},{value:"628008c6-d9fd-4590-ad84-6b9a42b84198",label:"Jane Smith",icon:x}],W=["places"];function X({onSubmit:t,loading:r=!1,selectedLocation:a}){const{isLoaded:p,loadError:m}=B({googleMapsApiKey:"",libraries:W}),d=h.useMemo(()=>({lat:5.6037,lng:-.187}),[]),l=_({resolver:L(Q),defaultValues:{storeName:"",longitude:(a==null?void 0:a.lng)||d.lng,latitude:(a==null?void 0:a.lat)||d.lat,Gopa_ID:"",User_ID:""}}),g=s=>{const o={storeName:s.storeName,Gopa_ID:s.Gopa_ID,Location:{type:"Point",coordinates:[s.longitude,s.latitude]},User_ID:s.User_ID};t(o),l.reset()};return m?e.jsx("div",{children:"Error loading map"}):p?e.jsx(w,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(g),className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"flex gap-4 items-start",children:e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx(b,{control:l.control,name:"Gopa_ID",render:({field:s})=>e.jsxs(j,{children:[e.jsx(y,{className:"text-gray-700",children:"Select Gopo"}),e.jsx(N,{children:e.jsx(V,{options:H,value:[s.value],onValueChange:o=>s.onChange(o[0]),placeholder:"Select a Gopo",maxCount:1,disabled:r})}),e.jsx(v,{className:"text-red-500"})]})}),e.jsx(b,{control:l.control,name:"storeName",render:({field:s})=>e.jsxs(j,{children:[e.jsx(y,{className:"text-gray-700",children:"Store Name"}),e.jsx(N,{children:e.jsx(R,{placeholder:"Enter store name",className:"border-gray-200 focus:border-[#4A36EC] focus:ring-[#4A36EC]",disabled:r,...s})}),e.jsx(v,{className:"text-red-500"})]})}),e.jsx("div",{className:"h-[200px] rounded-lg overflow-hidden",children:e.jsx(K,{zoom:13,center:d,mapContainerClassName:"w-full h-full",onClick:s=>{s.latLng&&(l.setValue("latitude",s.latLng.lat()),l.setValue("longitude",s.latLng.lng()))},children:e.jsx(T,{position:{lat:l.watch("latitude"),lng:l.watch("longitude")}})})})]})})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(E,{type:"submit",className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",disabled:r,children:r?"Saving...":"Save Seller"})})]})}):e.jsx("div",{children:"Loading..."})}function Ae(){const{data:t,isLoading:r}=O(),a=h.useMemo(()=>(t==null?void 0:t.data)||[],[t==null?void 0:t.data]),p=h.useMemo(()=>[{header:"Name",accessorKey:"name"},{header:"Email",accessorKey:"email"},{header:"Phone",accessorKey:"phoneNumber"},{header:"Status",accessorKey:"status",cell:({row:s})=>{const o=s.original.status===1;return e.jsxs("span",{className:S("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",o?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"),children:[e.jsx("span",{className:S("w-1.5 h-1.5 rounded-full mr-1.5",o?"bg-green-400":"bg-red-400")}),o?"Active":"Inactive"]})}}],[]),m=P(),d=()=>{m.openForm({title:"Add New Seller",children:e.jsx(X,{onSubmit:l,loading:!1}),showFooter:!1})},l=async s=>{try{console.log(s),f.success("Seller created successfully"),m.close()}catch{f.error("Failed to create seller")}},g=[{title:"Total Sellers",value:a.length,Icon:x,description:"Registered sellers",trend:"+3.2%",trendUp:!0},{title:"Active Locations",value:a.length,Icon:k,description:"Service locations",trend:"+2.1%",trendUp:!0},{title:"Assigned Gopos",value:new Set(a.map(s=>s.Gopa_ID)).size,Icon:I,description:"Active Gopos",trend:"+1.5%",trendUp:!0},{title:"Total Products",value:156,Icon:q,description:"Listed products",trend:"+4.3%",trendUp:!0}];return e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsx(G,{items:D.threeTier("User Management","/user-management","Sellers")}),e.jsx(C,{title:"Sellers",description:"Manage sellers and their locations",actions:e.jsxs(E,{onClick:d,className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Add Seller"]})}),e.jsx(U,{cards:g}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-6 gap-6",children:e.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"lg:col-span-4",children:e.jsx(F,{data:a,columns:p,loading:r})})})]})}export{Ae as default};
