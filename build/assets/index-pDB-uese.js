import{Q as N,k as E,j as e,a as d,r as h,g as x,F as w,C as I,x as P,l as T,m as K,R as b}from"./index-CG3cDFil.js";import{u as q,B,a as k,P as D}from"./pageHeader-DU7bLt5i.js";import{D as H}from"./index-DVvBrNmU.js";import{a as Q,C as U}from"./card-grid-DHAopdjS.js";import{u as z,a as G,F as L,b as g,c as j,d as v,e as V,f as M}from"./form-_i_eYalU.js";import{u as $}from"./useMutation-CVaQmNh4.js";import{u as R}from"./useQuery-Nb54E3uG.js";import{s as O,o as A,a as J,b as C}from"./index-Cksdco4c.js";import{I as W}from"./input-0St3XTHq.js";import{T as X}from"./trash-2-X-Fq5KTG.js";import{P as F}from"./plus-CgI7Ta1y.js";import{G as Y}from"./globe-CvmVd3kB.js";import{f as Z}from"./format-CBpsKyOP.js";import"./dialog-V-TE0CwV.js";import"./x-BgpYH4Yb.js";import"./house-BsMbUd4i.js";import"./table-CXQMyFfb.js";import"./sliders-horizontal-cnWW7Bce.js";import"./select-xgui-4X2.js";import"./arrow-left-D8MtdBnI.js";import"./arrow-right-iy4TempS.js";import"./card-TUnhNMrf.js";import"./popover-P3KGh40z.js";const i={all:["manufactures"],detail:r=>[...i.all,"detail",r],lists:()=>[...i.all,"list"],list:r=>[...i.lists(),r],stats:()=>[...i.all,"stats"]},_=r=>R({queryKey:i.list({}),queryFn:()=>N.getManufactures(r)}),ee=()=>{const r=E();return $({mutationFn:a=>N.createManufacturer(a),onSuccess:()=>{r.invalidateQueries({queryKey:i.all})}})},re=A({name:C().min(1,"Manufacturer name is required"),country:C().min(1,"Country is required")}),ae=A({manufacturers:J(re).min(1,"Add at least one manufacturer")});function te({onSubmit:r,loading:a=!1}){const t=z({resolver:O(ae),defaultValues:{manufacturers:[{name:"",country:""}]}}),{fields:u,append:f,remove:p}=G({control:t.control,name:"manufacturers"}),o=c=>{r(c.manufacturers),t.reset()};return e.jsx(L,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(o),className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:u.map((c,l)=>e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx(g,{control:t.control,name:`manufacturers.${l}.name`,render:({field:s})=>e.jsxs(j,{children:[e.jsx(v,{className:"text-gray-700",children:"Name"}),e.jsx(V,{children:e.jsx(W,{placeholder:"Enter manufacturer name",className:"border-gray-200 focus:border-[#4A36EC] focus:ring-[#4A36EC]",disabled:a,...s})}),e.jsx(M,{className:"text-red-500"})]})}),e.jsx(g,{control:t.control,name:`manufacturers.${l}.country`,render:({field:s})=>e.jsxs(j,{children:[e.jsx(v,{className:"text-gray-700",children:"Country"}),e.jsx(Q,{placeholder:"Enter country",defaultValue:s.value,onChange:y=>s.onChange(y.name),disabled:a}),e.jsx(M,{className:"text-red-500"})]})})]}),u.length>1&&e.jsx(d,{type:"button",variant:"outline",size:"icon",className:"mt-8 hover:bg-gray-100",onClick:()=>p(l),disabled:a,children:e.jsx(X,{className:"w-4 h-4 text-gray-600"})})]},c.id))}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(d,{type:"button",variant:"outline",className:"hover:bg-gray-100",onClick:()=>f({name:"",country:""}),disabled:a,children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Add Another"]}),e.jsx(d,{type:"submit",className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",disabled:a,children:a?"Saving...":"Save Manufacturers"})]})]})})}function Se(){const[r,a]=h.useState(!1),t=ee(),u=q(),f=async n=>{a(!0);try{await t.mutateAsync(n),b.success(`${n.length} manufacturer(s) created successfully`),u.close()}catch(m){console.error("Error creating manufacturers:",m),b.error("Failed to create manufacturers. Please try again.")}finally{a(!1)}},p=()=>{u.openForm({title:"Add Manufacturer",size:"md",showFooter:!1,children:e.jsx(te,{onSubmit:f,loading:r})})},{data:o,isLoading:c,isError:l}=_(),s=h.useMemo(()=>(o==null?void 0:o.data)||[],[o]),y=h.useMemo(()=>[{header:"Name",accessorKey:"name"},{header:"Country",accessorKey:"country"},{header:"Status",accessorKey:"status",cell:({row:n})=>{const m=n.original.status===1;return e.jsxs("span",{className:x("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",m?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"),children:[e.jsx("span",{className:x("w-1.5 h-1.5 rounded-full mr-1.5",m?"bg-green-400":"bg-red-400")}),m?"Active":"Inactive"]})}},{header:"Created On",accessorKey:"createdAt",cell:({row:n})=>e.jsx("span",{children:Z(new Date(n.original.createdAt),"yyyy/MM/dd HH:mm:a")})}],[]),S=[{title:"Total Manufacturers",value:s.length,Icon:w,description:"Active manufacturers in the system",trend:"+2.5%",trendUp:!0},{title:"Countries",value:new Set(s.map(n=>n.country)).size,Icon:Y,description:"Countries represented",trend:"+1.2%",trendUp:!0},{title:"Vehicle Models",value:234,Icon:I,description:"Associated vehicle models",trend:"+5.4%",trendUp:!0},{title:"Parts Categories",value:56,Icon:P,description:"Available part categories",trend:"+3.1%",trendUp:!0}];return c?e.jsx("div",{className:"p-8 space-y-8",children:e.jsx(T,{})}):l?e.jsx("div",{children:"Error loading manufacturers"}):e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsx(B,{items:k.threeTier("Inventory","/inventory","Manufacturers")}),e.jsx(D,{title:"Manufacturers",description:"Manage car manufacturers in the system",actions:e.jsxs(d,{onClick:p,className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Add Manufacturer"]})}),e.jsx(U,{cards:S}),e.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:e.jsx(H,{columns:y,data:s,loading:c,tableStyle:"border rounded-lg bg-white",tableHeadClassName:"text-[#4A36EC] font-semibold"})})]})}export{Se as default};
