import{aa as x,a1 as h,r as i,j as a,q as y,p as o,e as _,aA as v,aB as I,az as A,s as D,v as j,w as P,aC as S,I as T,C as q,m as C,D as B}from"./index-BEfPUQd3.js";import{a as N}from"./bidsQueries-CjHKO8bN.js";const t=[{id:2,bidding_ID:"3fa85f64-5717-4562-b3fc-2c963f66afa6",request_ID:"3fa85f64-5717-4562-b3fc-2c963f66afa6",assigned_by:"Admin User",Seller_ID:"3fa85f64-5717-4562-b3fc-2c963f66afa6",gopa_user_ID:"3fa85f64-5717-4562-b3fc-2c963f66afa6",date_assigned:"2025-05-07T16:11:32.620Z",status:0,price:150,unitPrice:150,description:"Original Toyota brake pads",createdAt:"2025-05-07T16:11:32.620Z",date_accepted:"2025-05-07T16:11:32.620Z",seller:{id:1,Seller_ID:"3fa85f64-5717-4562-b3fc-2c963f66afa6",storeName:"AutoParts Pro",business_reg_url:"https://example.com/business-reg",business_reg_obj:{},Location:{type:"Point",coordinates:[37.7749,-122.4194]},Gopa_ID:"3fa85f64-5717-4562-b3fc-2c963f66afa6",date_added:"2025-01-15T10:30:00.510Z",status:1},images:[{id:1,image_ID:"e16a631f-905d-4a6b-871d-7b4877c306d6",SparePart_ID:"6a2a9842-8f5c-44df-b951-f870907ba939",createdAt:"2025-01-08T11:59:01.609Z",status:1,image_url:"https://example.com/image1.jpg",image_ob:{data1:"dddd",data2:"cdvfdbgdfbf"}}],gopa:{User_ID:"3fa85f64-5717-4562-b3fc-2c963f66afa6",name:"John Doe"},assigner:"Admin User",orderRequest:{id:1,request_ID:"3fa85f64-5717-4562-b3fc-2c963f66afa6",SparePart_ID:"3fa85f64-5717-4562-b3fc-2c963f66afa6",User_ID:"3fa85f64-5717-4562-b3fc-2c963f66afa6",added_by:"3fa85f64-5717-4562-b3fc-2c963f66afa6",status:0,require_image:1,quantity:2,createdAt:"2025-05-07T16:11:32.620Z",requester:{User_ID:"3fa85f64-5717-4562-b3fc-2c963f66afa6",name:"Jane Smith"},creater:{User_ID:"3fa85f64-5717-4562-b3fc-2c963f66afa6",name:"Admin User"},sparePart:{id:1,SparePart_ID:"3fa85f64-5717-4562-b3fc-2c963f66afa6",name:"Brake Pads",description:"High-quality brake pads for Toyota vehicles",price:150,status:1,discount_ID:"3fa85f64-5717-4562-b3fc-2c963f66afa6",category_ID:"3fa85f64-5717-4562-b3fc-2c963f66afa6",carModel_ID:"3fa85f64-5717-4562-b3fc-2c963f66afa6",seller_ID:"3fa85f64-5717-4562-b3fc-2c963f66afa6",createdAt:"2025-05-07T16:11:32.620Z",updatedAt:"2025-05-07T16:11:32.620Z",images:[{id:1,image_ID:"e16a631f-905d-4a6b-871d-7b4877c306d6",SparePart_ID:"6a2a9842-8f5c-44df-b951-f870907ba939",createdAt:"2025-01-08T11:59:01.609Z",status:1,image_url:"https://example.com/image1.jpg",image_ob:{data1:"dddd",data2:"cdvfdbgdfbf"}}],carModel:{id:1,CarModel_ID:"3fa85f64-5717-4562-b3fc-2c963f66afa6",name:"Camry",yearOfMake:2020,carBrand_ID:"3fa85f64-5717-4562-b3fc-2c963f66afa6",status:1,createdAt:"2025-05-07T16:11:32.620Z",carBrand:{id:1,CarBrand_ID:"7043f08a-59f0-48bf-bf1d-ba11d1103908",name:"Toyota",status:1,manufacturer_ID:"fc3d7feb-0825-43ba-9f2d-b95ee62f464b",createdAt:"2025-01-08T10:17:33.989Z",type:"CAR",manufacturer:{id:1,Manufacturer_ID:"fc3d7feb-0825-43ba-9f2d-b95ee62f464b",name:"Toyota",country:"Japan",status:1,createdAt:"2025-01-08T10:09:21.400Z"}}}}}}];function M(){const c=x(),{id:f}=h(),[s,l]=i.useState(""),{data:r,isLoading:n,isError:u}=N(f),m=i.useMemo(()=>(r==null?void 0:r.data)||[],[r==null?void 0:r.data]),b=i.useMemo(()=>[{header:"Row Number",accessorKey:"id",cell:({row:e})=>a.jsxs("span",{className:"text-xs font-medium",children:["#",e.index+1]})},{header:"Bid ID",accessorKey:"id"},{header:"Spare Part",accessorKey:"orderRequest.sparePart.name",cell:({row:e})=>a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:e.original.orderRequest.sparePart.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:[e.original.orderRequest.sparePart.carModel.carBrand.name," ",e.original.orderRequest.sparePart.carModel.name]})]})},{header:"Requester",accessorKey:"orderRequest.requester.name"},{header:"Quantity",accessorKey:"orderRequest.quantity"},{header:"Price",accessorKey:"price",cell:({row:e})=>a.jsx("div",{children:new Intl.NumberFormat("en-US",{style:"currency",currency:"GHS"}).format(e.original.price)})},{header:"Date Assigned",accessorKey:"date_assigned",cell:({row:e})=>a.jsx("div",{children:y(new Date(e.original.date_assigned),"dd/MM/yyyy HH:mm:ss a")})},{header:"Status",accessorKey:"status",cell:({row:e})=>a.jsxs("span",{className:o("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",e.original.status===0?"bg-yellow-500 text-yellow-800 border border-yellow-200":"bg-green-500 text-green-800 border border-green-200"),children:[a.jsx("span",{className:o("w-1.5 h-1.5 rounded-full mr-1.5",e.original.status===0?"bg-yellow-400":"bg-green-400")}),e.original.status===0?"Pending":"Accepted"]})},{header:"Actions",accessorKey:"actions",cell:({row:e})=>a.jsx("div",{className:"flex space-x-2",children:a.jsx(_,{variant:"outline",size:"sm",className:"border-[#4A36EC] text-[#4A36EC] hover:bg-[#4A36EC] hover:text-white",onClick:()=>c(`/order-management/bids/${e.original.id}`),children:"View Details"})})}],[c]);console.log("bids",m);const g=t.filter(e=>e.orderRequest.sparePart.name.toLowerCase().includes(s.toLowerCase())||e.orderRequest.requester.name.toLowerCase().includes(s.toLowerCase())),p=[{title:"Total Active Bids",value:t.length,Icon:v,description:"Current active bids",trend:"+2.5%",trendUp:!0},{title:"Total Value",value:`GHS ${t.reduce((e,d)=>e+d.price,0).toFixed(2)}`,Icon:I,description:"Total value of active bids",trend:"+8.3%",trendUp:!0},{title:"Average Price",value:`GHS ${(t.reduce((e,d)=>e+d.price,0)/t.length).toFixed(2)}`,Icon:A,description:"Average bid price",trend:"+5.2%",trendUp:!0}];return n?a.jsx("div",{children:"Loading..."}):u?a.jsx("div",{children:"Error loading bids"}):a.jsxs("div",{className:"p-8 space-y-8",children:[a.jsx(D,{items:j.fourTier("Order Management","/order-management","Sellers","/order-management/sellers","Active Bids")}),a.jsx(P,{title:"Active Bids",description:"View and manage active bids for seller #{id}",actions:a.jsxs("div",{className:"relative w-72",children:[a.jsx(S,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx(T,{placeholder:"Search bids...",className:"pl-8",value:s,onChange:e=>l(e.target.value)})]})}),a.jsx(q,{cards:p}),a.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:a.jsx(B,{data:g,columns:b,loading:n,tableStyle:"border rounded-lg bg-white",tableHeadClassName:"text-[#4A36EC] font-semibold"})})]})}export{M as default};
