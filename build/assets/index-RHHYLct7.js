import{r as g,g as F,h as I,j as e,M as E,F as P,i as u,k as p,l as h,n as j,H as k,J as T,K as $,L as B,N as L,o as v,e as b,I as y,p as A,s as V,v as q,w as G,m as M,b as K,d as U,D as z,x as C}from"./index-BEfPUQd3.js";import{u as H}from"./modal-helpers-u5ghZSiS.js";import{u as R}from"./menu.queries-57U7xnAT.js";import{s as _}from"./zod-DPUoip6C.js";import{z as m}from"./index-3Gi9B8Cu.js";import{S as D}from"./switch-B-iytIsw.js";import{u as J}from"./applications.queries-B_YvO4f9.js";import{P as w}from"./plus-D6nxsE-o.js";import{T as Q}from"./trash-2-DQhLckhX.js";import{F as W}from"./folder-tree-DSE_taYH.js";import{L as X}from"./lock-BqMNhkTp.js";import"./dialog-DfEuW_jS.js";const Y=m.object({applicationId:m.string().min(1,"Application ID is required"),menus:m.array(m.object({name:m.string().min(1,"Menu name is required"),description:m.string().optional(),isActive:m.boolean().default(!0)})).min(1,"At least one menu is required")});function Z({onSubmit:l,loading:a=!1}){const{data:c}=J(),x=g.useMemo(()=>{var r;return(r=c==null?void 0:c.data)==null?void 0:r.map(t=>({label:t.name,value:t.application_id}))},[c]),n=F({resolver:_(Y),defaultValues:{applicationId:"",menus:[{name:"",description:"",isActive:!0}]}}),{fields:o,append:f,remove:N}=I({control:n.control,name:"menus"}),s=r=>{const t=r.menus.map(i=>({application_id:r.applicationId,name:i.name,description:i.description,is_active:i.isActive}));l(t),n.reset()},d=()=>{f({name:"",description:"",isActive:!0})},S=r=>{o.length>1&&N(r)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5 text-[#4A36EC]"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Multiple Menus"})]}),e.jsx(P,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(s),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(u,{control:n.control,name:"applicationId",render:({field:r})=>e.jsxs(p,{children:[e.jsx(h,{className:"text-gray-700",children:"Application *"}),e.jsx(j,{children:e.jsxs(k,{onValueChange:r.onChange,defaultValue:r.value,disabled:a,value:r.value,children:[e.jsx(T,{className:"border-gray-200 focus:border-[#4A36EC] focus:ring-[#4A36EC]",children:e.jsx($,{placeholder:"Select application"})}),e.jsx(B,{children:x==null?void 0:x.map(t=>e.jsx(L,{value:t.value,children:t.label},t.value))})]})}),e.jsx(v,{className:"text-red-500"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Menus"}),e.jsxs(b,{type:"button",variant:"outline",size:"sm",onClick:d,disabled:a,className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4"}),"Add Menu"]})]}),o.map((r,t)=>e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h5",{className:"text-sm font-medium text-gray-700",children:["Menu ",t+1]}),o.length>1&&e.jsx(b,{type:"button",variant:"ghost",size:"sm",onClick:()=>S(t),disabled:a,className:"text-red-600 hover:text-red-700",children:e.jsx(Q,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(u,{control:n.control,name:`menus.${t}.name`,render:({field:i})=>e.jsxs(p,{children:[e.jsx(h,{className:"text-gray-700",children:"Menu Name *"}),e.jsx(j,{children:e.jsx(y,{...i,placeholder:"Enter menu name",className:"border-gray-200 focus:border-[#4A36EC] focus:ring-[#4A36EC]",disabled:a})}),e.jsx(v,{className:"text-red-500"})]})}),e.jsx(u,{control:n.control,name:`menus.${t}.description`,render:({field:i})=>e.jsxs(p,{children:[e.jsx(h,{className:"text-gray-700",children:"Description"}),e.jsx(j,{children:e.jsx(y,{...i,placeholder:"Enter menu description",className:"border-gray-200 focus:border-[#4A36EC] focus:ring-[#4A36EC]",disabled:a})}),e.jsx(v,{className:"text-red-500"})]})})]}),e.jsx(u,{control:n.control,name:`menus.${t}.isActive`,render:({field:i})=>e.jsxs(p,{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-gray-700",children:"Active"}),e.jsx(j,{children:e.jsx(D,{checked:i.value,onCheckedChange:i.onChange,disabled:a})})]})})]},r.id))]})]}),e.jsx("div",{className:"flex justify-end space-x-3 pt-4",children:e.jsx(b,{type:"submit",disabled:a||!n.formState.isValid,className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:a?"Creating...":`Create ${o.length} Menu${o.length!==1?"s":""}`})})]})})]})}function me(){const{data:l}=R(),a=g.useMemo(()=>(l==null?void 0:l.data)||[],[l==null?void 0:l.data]);console.log(a);const c=g.useMemo(()=>[{id:"1",title:"Main Navigation"},{id:"2",title:"Settings"},{id:"3",title:"Reports"}],[]),x=H(),n=g.useMemo(()=>[{header:"Name",accessorKey:"name",cell:({row:s})=>e.jsx("div",{children:s.original.name})},{header:"Permissions",accessorKey:"permissions",cell:({row:s})=>e.jsx("div",{children:s.original.permissions?e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:s.original.permissions}):e.jsx("span",{className:"text-gray-400 text-xs",children:"No permissions"})})},{header:"Status",accessorKey:"isActive",cell:({row:s})=>{const d=s.original.isActive;return e.jsxs("span",{className:A("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",d?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"),children:[e.jsx("span",{className:A("w-1.5 h-1.5 rounded-full mr-1.5",d?"bg-green-400":"bg-red-400")}),d?"Active":"Inactive"]})}}],[]),o=()=>{x.openForm({title:"Add New Menu Item",children:e.jsx(Z,{onSubmit:f,loading:!1,existingGroups:c}),showFooter:!1})},f=async s=>{try{console.log(s),C.success("Menu item created successfully"),x.close()}catch{C.error("Failed to create menu item")}},N=[{title:"Menu Groups",value:c.length,icon:W,description:"Active groups",trend:"+2.5%",trendUp:!0},{title:"Menu Items",value:a.length,icon:E,description:"Total items",trend:"+3.2%",trendUp:!0},{title:"Protected Routes",value:a.filter(s=>s.permissions).length,icon:X,description:"Permission required",trend:"+1.8%",trendUp:!0}];return e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsx(V,{items:q.threeTier("Access Management","/access-management","Menus")}),e.jsx(G,{title:"Menu Configuration",description:"Manage menu groups, items, and permissions",actions:e.jsxs(b,{onClick:o,className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Add Menu Item"]})}),e.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:N.map((s,d)=>e.jsx(K,{className:"border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs(U,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:s.description}),e.jsx("p",{className:"text-2xl font-bold text-[#4A36EC]",children:s.value}),e.jsx("p",{className:"text-xs text-gray-500",children:s.title})]}),e.jsx("div",{className:"p-3 bg-[#4A36EC]/10 rounded-full",children:e.jsx(s.icon,{className:"w-6 h-6 text-[#4A36EC]"})})]}),e.jsxs("div",{className:"mt-4 flex items-center",children:[e.jsx("span",{className:`text-xs ${s.trendUp?"text-green-600":"text-red-600"}`,children:s.trend}),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"vs last month"})]})]})},d))}),e.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:e.jsx(z,{data:a,columns:n,loading:!1,tableStyle:"border rounded-lg bg-white",tableHeadClassName:"text-[#4A36EC] font-semibold"})})]})}export{me as default};
