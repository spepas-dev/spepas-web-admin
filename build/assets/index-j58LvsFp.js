import{c as R,g as V,h as W,r as N,j as e,F as _,i as d,k as m,l as x,n as h,W as I,o as u,H as T,J as D,K as S,L as M,N as w,I as L,e as b,aD as $,aE as H,aF as C,aG as g,aH as O,aI as j,G as U,aL as k,m as E,b as z,d as K}from"./index-BEfPUQd3.js";import{s as G}from"./zod-DPUoip6C.js";import{o as P,a as q,s as y,e as J}from"./index-3Gi9B8Cu.js";import{D as X,a as Y,b as Q,c as Z,d as ee}from"./dialog-DfEuW_jS.js";import{M as se}from"./multi-select-DEp3z63F.js";import{T as ae}from"./trash-2-DQhLckhX.js";import{P as B}from"./plus-D6nxsE-o.js";import{C as te}from"./credit-card-DOs8d0dW.js";import{U as re}from"./user-NtLM3mmy.js";import"./separator-DpEqoi9c.js";import"./circle-x-Bb9PP882.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],ce=R("Building",ne),le=P({mode:J(["WALLET","BANK","CARD"],{required_error:"Please select a payment mode"}),accountNumber:y().min(1,"Account number is required").regex(/^\d+$/,"Account number must contain only numbers"),provider:y().min(1,"Please select a provider"),User_ID:y().min(1,"Please select a user"),name:y().min(1,"Account holder name is required")}),oe=P({accounts:q(le).min(1,"Add at least one payment account")}),ie=[{value:"4298e2e3-4215-4884-9bb1-3fc7d9695e49",label:"James Baako",icon:I}],de=["WALLET","BANK","CARD"],me={WALLET:["MTN","VODAFONE","AIRTELTIGO"],BANK:["GCB","ECOBANK","ABSA","FIDELITY"],CARD:["VISA","MASTERCARD","AMEX"]};function xe({open:c,onOpenChange:t,onSubmit:l}){const a=V({resolver:G(oe),defaultValues:{accounts:[{mode:"WALLET",accountNumber:"",provider:"",User_ID:"",name:""}]}}),{fields:i,append:p,remove:A}=W({control:a.control,name:"accounts"});N.useEffect(()=>{c||a.reset({accounts:[{mode:"WALLET",accountNumber:"",provider:"",User_ID:"",name:""}]})},[c]);const f=s=>{l(s.accounts),a.reset()};return e.jsx(X,{open:c,onOpenChange:t,children:e.jsxs(Y,{className:"max-w-2xl bg-white",children:[e.jsxs(Q,{children:[e.jsx(Z,{className:"text-[#4A36EC] text-xl font-bold",children:"Add Payment Account"}),e.jsx(ee,{className:"text-gray-600",children:"Register new payment accounts for users"})]}),e.jsx(_,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(f),className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:i.map((s,r)=>{const F=a.watch(`accounts.${r}.mode`);return e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[e.jsx(d,{control:a.control,name:`accounts.${r}.User_ID`,render:({field:n})=>e.jsxs(m,{children:[e.jsx(x,{className:"text-gray-700",children:"Select User"}),e.jsx(h,{children:e.jsx(se,{options:ie,value:[n.value],onValueChange:o=>n.onChange(o[0]),placeholder:"Select a user",maxCount:1})}),e.jsx(u,{className:"text-red-500"})]})}),e.jsx(d,{control:a.control,name:`accounts.${r}.mode`,render:({field:n})=>e.jsxs(m,{children:[e.jsx(x,{className:"text-gray-700",children:"Payment Mode"}),e.jsxs(T,{onValueChange:o=>{n.onChange(o),a.setValue(`accounts.${r}.provider`,"")},defaultValue:n.value,children:[e.jsx(h,{children:e.jsx(D,{children:e.jsx(S,{placeholder:"Select payment mode"})})}),e.jsx(M,{children:de.map(o=>e.jsx(w,{value:o,children:o},o))})]}),e.jsx(u,{className:"text-red-500"})]})}),e.jsx(d,{control:a.control,name:`accounts.${r}.provider`,render:({field:n})=>{var o;return e.jsxs(m,{children:[e.jsx(x,{className:"text-gray-700",children:"Provider"}),e.jsxs(T,{onValueChange:n.onChange,defaultValue:n.value,children:[e.jsx(h,{children:e.jsx(D,{children:e.jsx(S,{placeholder:"Select provider"})})}),e.jsx(M,{children:(o=me[F])==null?void 0:o.map(v=>e.jsx(w,{value:v,children:v},v))})]}),e.jsx(u,{className:"text-red-500"})]})}}),e.jsx(d,{control:a.control,name:`accounts.${r}.accountNumber`,render:({field:n})=>e.jsxs(m,{children:[e.jsx(x,{className:"text-gray-700",children:"Account Number"}),e.jsx(h,{children:e.jsx(L,{placeholder:"Enter account number",className:"border-gray-200 focus:border-[#4A36EC] focus:ring-[#4A36EC]",...n})}),e.jsx(u,{className:"text-red-500"})]})}),e.jsx(d,{control:a.control,name:`accounts.${r}.name`,render:({field:n})=>e.jsxs(m,{children:[e.jsx(x,{className:"text-gray-700",children:"Account Holder Name"}),e.jsx(h,{children:e.jsx(L,{placeholder:"Enter account holder name",className:"border-gray-200 focus:border-[#4A36EC] focus:ring-[#4A36EC]",...n})}),e.jsx(u,{className:"text-red-500"})]})}),i.length>1&&e.jsx(b,{type:"button",variant:"outline",size:"icon",className:"hover:bg-gray-100",onClick:()=>A(r),children:e.jsx(ae,{className:"w-4 h-4 text-gray-600"})})]},s.id)})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(b,{type:"button",variant:"outline",className:"hover:bg-gray-100",onClick:()=>p({mode:"WALLET",accountNumber:"",provider:"",User_ID:"",name:""}),children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Add Another"]}),e.jsx(b,{type:"submit",className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:"Save Accounts"})]})]})})]})})}const he={"4298e2e3-4215-4884-9bb1-3fc7d9695e49":{name:"James Baako",email:"james@example.com"}},ue=c=>({WALLET:"bg-blue-100 text-blue-800",BANK:"bg-green-100 text-green-800",CARD:"bg-purple-100 text-purple-800"})[c]||"bg-gray-100 text-gray-800";function je({accounts:c}){return e.jsx("div",{className:"border rounded-lg bg-white",children:e.jsxs($,{children:[e.jsx(H,{children:e.jsxs(C,{className:"bg-gray-50",children:[e.jsx(g,{className:"text-[#4A36EC] font-semibold",children:"Account Holder"}),e.jsx(g,{className:"text-[#4A36EC] font-semibold",children:"Account Details"}),e.jsx(g,{className:"text-[#4A36EC] font-semibold",children:"Provider"}),e.jsx(g,{className:"text-[#4A36EC] font-semibold",children:"Payment Mode"})]})}),e.jsxs(O,{children:[c.map((t,l)=>{var a;return e.jsxs(C,{className:"hover:bg-gray-50 transition-colors",children:[e.jsx(j,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-900 font-medium",children:t.name}),e.jsx("span",{className:"text-gray-500 text-sm",children:((a=he[t.User_ID])==null?void 0:a.email)||"Unknown User"})]})}),e.jsx(j,{className:"text-gray-700",children:e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"font-medium",children:t.accountNumber})})}),e.jsx(j,{children:e.jsx(U,{variant:"outline",className:"bg-gray-100",children:t.provider})}),e.jsx(j,{children:e.jsx(U,{className:ue(t.mode),children:t.mode})})]},l)}),c.length===0&&e.jsx(C,{children:e.jsx(j,{colSpan:4,className:"text-center text-gray-500 py-8",children:"No payment accounts registered yet"})})]})]})})}function De(){const[c,t]=N.useState(!1),[l,a]=N.useState([]),[i,p]=N.useState(null),A=async s=>{try{console.log(s),a([...l,...s]),t(!1),p(null)}catch(r){p("Failed to add payment accounts"),console.error(r)}},f=[{title:"Total Accounts",value:l.length,icon:I,description:"Registered accounts",trend:"+3.2%",trendUp:!0},{title:"Payment Methods",value:new Set(l.map(s=>s.mode)).size,icon:te,description:"Available methods",trend:"+1.8%",trendUp:!0},{title:"Providers",value:new Set(l.map(s=>s.provider)).size,icon:ce,description:"Active providers",trend:"+2.5%",trendUp:!0},{title:"Active Users",value:new Set(l.map(s=>s.User_ID)).size,icon:re,description:"With payment methods",trend:"+2.1%",trendUp:!0}];return e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx("a",{href:"/",className:"hover:text-[#4A36EC]",children:"Dashboard"}),e.jsx(k,{className:"w-4 h-4 mx-2"}),e.jsx("a",{href:"/user-management",className:"hover:text-[#4A36EC]",children:"User Management"}),e.jsx(k,{className:"w-4 h-4 mx-2"}),e.jsx("span",{className:"text-[#4A36EC] font-medium",children:"Payment Accounts"})]}),e.jsxs(E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-[#4A36EC]",children:"Payment Accounts"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage user payment accounts and methods"})]}),e.jsxs(b,{onClick:()=>t(!0),className:"bg-[#4A36EC] hover:bg-[#5B4AEE] text-white",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Add Payment Account"]})]}),e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:f.map((s,r)=>e.jsx(z,{className:"border border-gray-200 hover:border-[#4A36EC] transition-colors",children:e.jsxs(K,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s.title}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-2",children:s.value})]}),e.jsx("div",{className:"bg-[#4A36EC]/10 p-2 rounded-lg",children:e.jsx(s.icon,{className:"w-5 h-5 text-[#4A36EC]"})})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-500",children:s.description}),e.jsx("span",{className:`text-xs font-medium ${s.trendUp?"text-green-600":"text-red-600"}`,children:s.trend})]})]})},r))}),e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:e.jsx(je,{accounts:l})}),i&&e.jsx("div",{className:"text-red-600 text-sm",children:i}),e.jsx(xe,{open:c,onOpenChange:t,onSubmit:A})]})}export{De as default};
